(function(){"use strict";var e={160:function(e,t,i){var a=i(9242),s=i(3396);function n(e,t,i,a,n,l){const o=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(o)}var l={name:"App"},o=i(89);const r=(0,o.Z)(l,[["render",n]]);var c=r,m=i(678),_=i(7139);const f=e=>((0,s.dD)("data-v-8a61b88c"),e=e(),(0,s.Cn)(),e),u={class:"films"},v={class:"container"},d=f((()=>(0,s._)("h1",{class:"films__title"},'Список "лучших" фильмов',-1))),p={class:"films__list"},h={class:"film__image"},g=["src"],w={class:"film__rating"},D={class:"film__description"},b={class:"film__title"},k={class:"film__release-date"},L={class:"film__overview"},y=(0,s.Uk)(" Подробнее "),O={ref:"observer",class:"observer"};function z(e,t,i,n,l,o){const r=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("section",u,[(0,s._)("div",v,[d,(0,s._)("div",p,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.filmList,(t=>((0,s.wg)(),(0,s.iD)("article",{key:t.id,class:"film"},[(0,s._)("div",h,[(0,s._)("img",{src:`https://www.themoviedb.org/t/p/w220_and_h330_face/${t.poster_path}`,alt:"постер фильма"},null,8,g),(0,s._)("span",w,(0,_.zw)(t.vote_average),1)]),(0,s._)("div",D,[(0,s._)("h3",b,(0,_.zw)(t.title),1),(0,s._)("time",k,(0,_.zw)(e.formateDate(t.release_date,"-","ru-RU")),1),(0,s._)("p",L,(0,_.zw)(t.overview),1),(0,s.Wm)(r,{class:"film__link",to:{name:"film-details",params:{id:t.id}}},{default:(0,s.w5)((()=>[y])),_:2},1032,["to"])])])))),128)),(0,s.wy)((0,s._)("div",O,null,512),[[a.F8,l.filmList.length]])])])])}const $="2436e460f8eac2bd6b2102c48351941b",j="top_rated",U=(e=1)=>{const t=`https://api.themoviedb.org/3/movie/${j}?api_key=${$}&language=ru&page=${e}`;return fetch(t).then((e=>e.json())).catch((e=>{console.log(e)}))},x=e=>{const t=`https://api.themoviedb.org/3/movie/${e}?api_key=${$}&language=ru`;return fetch(t).then((e=>e.json())).then((e=>e)).catch((e=>{console.log(e)}))};var F={methods:{formateDate(e,t,i){if(!e)return;const a=e.split(t);return new Date(...a).toLocaleString(i,{day:"numeric",month:"short",year:"numeric"})}}},q={name:"film-list",mixins:[F],data(){return{filmList:[],page:1,totalPages:1}},created(){this.loadFilmList()},mounted(){this.loadingOnScroll()},methods:{async loadFilmList(){if(this.page>this.totalPages)return;const e=await U(this.page);this.totalPages=e.total_pages,this.filmList=[...this.filmList,...e.results]},loadingOnScroll(){const e={rootMargin:"0px",threshold:.5},t=e=>{e[0].isIntersecting&&(this.page++,this.loadFilmList())},i=new IntersectionObserver(t,e);i.observe(this.$refs.observer)}}};const P=(0,o.Z)(q,[["render",z],["__scopeId","data-v-8a61b88c"]]);var C=P;const H=e=>((0,s.dD)("data-v-4e25956c"),e=e(),(0,s.Cn)(),e),M={class:"container"},S=(0,s.Uk)(" Назад к списку "),I={class:"movie__inner"},T={class:"movie__poster"},K=["src"],R={class:"movie__short-description"},Y={class:"movie__title"},Z={key:0,class:"movie__tagline"},W={class:"movie__facts"},A={key:0,class:"movie__fact"},E=H((()=>(0,s._)("span",{class:"movie__fact-name"},"Рейтинг: ",-1))),B={class:"movie__fact"},G=H((()=>(0,s._)("span",{class:"movie__fact-name"}," Год производства: ",-1))),J={class:"movie__fact"},N=H((()=>(0,s._)("span",{class:"movie__fact-name"},"Время: ",-1))),Q={key:1,class:"movie__fact"},V=H((()=>(0,s._)("span",{class:"movie__fact-name"},"Жанр: ",-1))),X={class:"movie__fact"},ee=H((()=>(0,s._)("span",{class:"movie__fact-name"},"Страна: ",-1))),te={class:"movie__fact"},ie=H((()=>(0,s._)("span",{class:"movie__fact-name"},"Бюджет: ",-1))),ae={key:1,class:"overview"},se={class:"container"},ne={class:"overview__inner"},le=H((()=>(0,s._)("h3",{class:"overview__title"},"Обзор",-1))),oe={class:"overview__text"};function re(e,t,i,a,n,l){const o=(0,s.up)("router-link");return n.filmLDetails?((0,s.wg)(),(0,s.iD)("section",{key:0,class:(0,_.C_)(["movie",{"movie_without-overview":!n.filmLDetails.overview}])},[n.filmLDetails.backdrop_path?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"movie__bg",style:(0,_.j5)({"background-image":`url(https://www.themoviedb.org/t/p/w1920_and_h800_face/${n.filmLDetails.backdrop_path})`})},null,4)):(0,s.kq)("",!0),(0,s._)("div",M,[(0,s.Wm)(o,{class:"back-btn",to:{name:"film-list"}},{default:(0,s.w5)((()=>[S])),_:1}),(0,s._)("div",I,[(0,s._)("div",T,[(0,s._)("img",{src:`https://www.themoviedb.org/t/p/w300_and_h450_face/${n.filmLDetails.poster_path}`,alt:"постер фильма"},null,8,K)]),(0,s._)("div",R,[(0,s._)("h1",Y,(0,_.zw)(n.filmLDetails.title),1),n.filmLDetails.tagline?((0,s.wg)(),(0,s.iD)("blockquote",Z,(0,_.zw)(n.filmLDetails.tagline),1)):(0,s.kq)("",!0),(0,s._)("ul",W,[n.filmLDetails.vote_average||n.filmLDetails.vote_count?((0,s.wg)(),(0,s.iD)("li",A,[E,(0,s.Uk)(" "+(0,_.zw)(n.filmLDetails.vote_average)+" ("+(0,_.zw)(n.filmLDetails.vote_count)+" оценок) ",1)])):(0,s.kq)("",!0),(0,s._)("li",B,[G,(0,s.Uk)(" "+(0,_.zw)(e.formateDate(n.filmLDetails.release_date,"-","ru-RU")??"-"),1)]),(0,s._)("li",J,[N,(0,s.Uk)(" "+(0,_.zw)(e.formateMinutesToHours(n.filmLDetails.runtime)??"-"),1)]),n.filmLDetails.genres?((0,s.wg)(),(0,s.iD)("li",Q,[V,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.filmLDetails.genres,(e=>((0,s.wg)(),(0,s.iD)("span",{key:e.id,class:"movie__fact-enumeration"},(0,_.zw)(e.name),1)))),128))])):(0,s.kq)("",!0),(0,s._)("li",X,[ee,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.filmLDetails.production_countries,(e=>((0,s.wg)(),(0,s.iD)("span",{key:e.name,class:"movie__fact-enumeration"},(0,_.zw)(e.name??"Неизвестно"),1)))),128))]),(0,s._)("li",te,[ie,(0,s.Uk)(" "+(0,_.zw)(n.filmLDetails.budget?n.filmLDetails.budget.toLocaleString("ru-RU",{style:"currency",currency:"USD",minimumFractionDigits:0}):"Неизвестно"),1)])])])])]),n.filmLDetails.overview?((0,s.wg)(),(0,s.iD)("div",ae,[(0,s._)("div",se,[(0,s._)("div",ne,[le,(0,s._)("p",oe,(0,_.zw)(n.filmLDetails.overview),1)])])])):(0,s.kq)("",!0)],2)):(0,s.kq)("",!0)}var ce={methods:{formateMinutesToHours(e){if(!e)return;const t=Math.floor(e/60),i=e%60;return t?i?`${t} ч ${i} мин`:`${t} ч`:`${i} мин`}}},me={name:"film-details",mixins:[F,ce],data(){return{filmLDetails:void 0}},created(){this.loadFilmDetails()},methods:{async loadFilmDetails(){this.filmLDetails=await x(this.$route.params.id)}}};const _e=(0,o.Z)(me,[["render",re],["__scopeId","data-v-4e25956c"]]);var fe=_e;const ue=[{path:"/",name:"film-list",component:C},{path:"/film-:id",name:"film-details",component:fe}],ve=(0,m.p7)({history:(0,m.PO)("/"),routes:ue});var de=ve;(0,a.ri)(c).use(de).mount("#app")}},t={};function i(a){var s=t[a];if(void 0!==s)return s.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,i),n.exports}i.m=e,function(){var e=[];i.O=function(t,a,s,n){if(!a){var l=1/0;for(m=0;m<e.length;m++){a=e[m][0],s=e[m][1],n=e[m][2];for(var o=!0,r=0;r<a.length;r++)(!1&n||l>=n)&&Object.keys(i.O).every((function(e){return i.O[e](a[r])}))?a.splice(r--,1):(o=!1,n<l&&(l=n));if(o){e.splice(m--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var m=e.length;m>0&&e[m-1][2]>n;m--)e[m]=e[m-1];e[m]=[a,s,n]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,n,l=a[0],o=a[1],r=a[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(s in o)i.o(o,s)&&(i.m[s]=o[s]);if(r)var m=r(i)}for(t&&t(a);c<l.length;c++)n=l[c],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(m)},a=self["webpackChunkfilms"]=self["webpackChunkfilms"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=i.O(void 0,[998],(function(){return i(160)}));a=i.O(a)})();
//# sourceMappingURL=app.c96a067f.js.map